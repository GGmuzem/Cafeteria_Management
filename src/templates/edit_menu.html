{% extends "base.html" %}

{% block title %}Редактировать блюдо - Вкусная Столовая{% endblock %}

{% block content %}
<div class="card" style="max-width: 600px; margin: 0 auto;">
    <h2><i class="fas fa-edit"></i> Редактирование: {{ dish.name }}</h2>

    <form method="post">
        <div class="form-group">
            <label class="form-label">Название:</label>
            <input type="text" name="name" value="{{ dish.name }}" class="form-control" required>
        </div>

        <div class="form-group">
            <label class="form-label">Цена (руб):</label>
            <input type="number" name="price" value="{{ dish.price }}" class="form-control" required>
        </div>

        <div class="form-group">
            <label class="form-label">Состав (через запятую):</label>
            {% set ingredients_val = '' %}
            {% if dish.composition is mapping %}
            {% set ingredients_val = dish.composition.get('ingredients', []) | join(', ') %}
            {% else %}
            {% set ingredients_val = dish.composition %}
            {% endif %}
            <textarea name="composition" rows="4" class="form-control" required>{{ ingredients_val }}</textarea>
        </div>

        <div class="form-group">
            <label class="form-label">Вес (г):</label>
            {% set weight_val = '' %}
            {% if dish.composition is mapping %}
            {% set weight_val = dish.composition.get('weight', '') %}
            {% endif %}
            <input type="number" name="weight" value="{{ weight_val }}" class="form-control" placeholder="150">
        </div>

        <div class="form-group">
            <label class="form-label">Тип меню:</label>
            <div class="select-wrapper">
                <select name="meal_type" class="form-control">
                    <option value="Завтрак" {% if dish.meal_type=='Завтрак' %}selected{% endif %}>Завтрак</option>
                    <option value="Обед" {% if dish.meal_type=='Обед' %}selected{% endif %}>Обед</option>
                </select>
            </div>
        </div>

        <div style="display: flex; gap: 10px; margin-top: 30px;">
            <button type="submit" class="btn btn-primary" style="flex: 1;">Сохранить изменения</button>
            <a href="{{ url_for('menu') }}" class="btn btn-outline" style="flex: 1;">Отмена</a>
        </div>
    </form>
</div>
{% endblock %}