<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Панель повара</title>
</head>
<body>

<h1>Вы авторизовались как повар</h1>

<hr>
<h2>Добавить блюдо в меню</h2>
<form method="post">
    <input type="hidden" name="action" value="add_menu">

    <label>Название блюда:</label><br>
    <input type="text" name="name" required><br><br>

    <label>Цена:</label><br>
    <input type="number" name="price" required><br><br>

    <label>Состав:</label><br>
    <textarea name="composition" rows="4" cols="50" required>
    </textarea><br><br>

    <label>Вес (г):</label><br>
    <input type="number" name="weight" placeholder="Например: 250"><br><br>

    <label>Тип меню:</label><br>
    <select name="meal_type">
        <option value="Завтрак">Завтрак</option>
        <option value="Обед">Обед</option>
    </select><br><br>

    <button type="submit">Добавить блюдо</button>
</form>


<hr>
<h2>Текущее меню</h2>
{% if menu %}
    <ul>
        {% for dish in menu %}
            <li>
                <b>{{ dish.name }}</b> —
                {{ dish.price }} руб.<br>
                Тип: {{ dish.meal_type }}<br>
                Состав: 
                {% if dish.composition is mapping %}
                    {{ dish.composition.get('ingredients', []) | join(', ') }}
                    {% if dish.composition.get('weight') %}
                        <br>Вес: {{ dish.composition.get('weight') }} г.
                    {% endif %}
                {% else %}
                    {{ dish.composition }}
                {% endif %}
            </li>
        {% endfor %}
    </ul>
{% else %}
    <p>Меню пока пустое.</p>
{% endif %}


<hr>
<h2>Склад</h2>
{% if storage %}
    <ul>
        {% for item in storage %}
            <li>{{ item.name }} — {{ item.count }}</li>
        {% endfor %}
    </ul>
{% else %}
    <p>Склад пуст.</p>
{% endif %}

<hr>
<a href="/logout">Выйти</a>

</body>
</html>
